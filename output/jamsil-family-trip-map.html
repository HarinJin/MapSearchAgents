<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ì ì‹¤ ì–´ë¦°ì´ ë™ë°˜ ë°˜ë‚˜ì ˆ ì½”ìŠ¤ - ì§€ë„</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    }
    .container {
      display: flex;
      height: 100vh;
    }
    #map {
      flex: 1;
      height: 100%;
    }
    .sidebar {
      width: 360px;
      height: 100%;
      overflow-y: auto;
      background: #f8f9fa;
      border-left: 1px solid #ddd;
    }
    .sidebar-header {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 20px;
    }
    .sidebar-header h1 {
      font-size: 1.3rem;
      margin-bottom: 4px;
    }
    .sidebar-header p {
      font-size: 0.85rem;
      opacity: 0.8;
    }
    .category {
      padding: 12px 16px;
      border-bottom: 1px solid #eee;
    }
    .category-title {
      font-weight: 600;
      font-size: 0.9rem;
      color: #666;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      gap: 6px;
    }
    .place-item {
      padding: 10px 12px;
      margin-bottom: 6px;
      background: white;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.2s;
      border-left: 3px solid transparent;
    }
    .place-item:hover {
      background: #e9ecef;
      transform: translateX(4px);
    }
    .place-item.active {
      border-left-color: #667eea;
      background: #e9ecef;
    }
    .place-item .name {
      font-weight: 500;
      font-size: 0.95rem;
      color: #333;
    }
    .place-item .meta {
      font-size: 0.8rem;
      color: #888;
      margin-top: 2px;
    }
    .place-item .link {
      font-size: 0.75rem;
      color: #667eea;
      text-decoration: none;
      margin-top: 4px;
      display: inline-block;
    }
    .place-item .link:hover {
      text-decoration: underline;
    }
    .legend {
      padding: 12px 16px;
      background: #fff;
      border-top: 1px solid #eee;
    }
    .legend-item {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 0.8rem;
      color: #666;
      margin-bottom: 4px;
    }
    .legend-dot {
      width: 12px;
      height: 12px;
      border-radius: 50%;
    }
    .dot-play { background: #e74c3c; }
    .dot-food { background: #f39c12; }
    .dot-cafe { background: #27ae60; }

    /* Custom marker styles */
    .custom-marker {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 32px;
      height: 32px;
      border-radius: 50%;
      color: white;
      font-size: 14px;
      font-weight: bold;
      box-shadow: 0 2px 8px rgba(0,0,0,0.3);
      border: 2px solid white;
    }
    .marker-play { background: #e74c3c; }
    .marker-food { background: #f39c12; }
    .marker-cafe { background: #27ae60; }

    .leaflet-popup-content {
      margin: 12px;
    }
    .popup-title {
      font-weight: 600;
      font-size: 1rem;
      margin-bottom: 4px;
    }
    .popup-category {
      font-size: 0.8rem;
      color: #888;
      margin-bottom: 8px;
    }
    .popup-link {
      display: inline-block;
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: white;
      padding: 6px 12px;
      border-radius: 4px;
      text-decoration: none;
      font-size: 0.85rem;
    }
    .popup-link:hover {
      opacity: 0.9;
    }
  </style>
</head>
<body>
  <div class="container">
    <div id="map"></div>
    <div class="sidebar">
      <div class="sidebar-header">
        <h1>ğŸ  ì ì‹¤ ì–´ë¦°ì´ ë™ë°˜ ë°˜ë‚˜ì ˆ ì½”ìŠ¤</h1>
        <p>ì¥ì†Œë¥¼ í´ë¦­í•˜ë©´ ì§€ë„ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤</p>
      </div>

      <div class="category">
        <div class="category-title">ğŸ¡ ì—¬ê°€ / ë†€ì´</div>
        <div id="places-play"></div>
      </div>

      <div class="category">
        <div class="category-title">ğŸ½ï¸ ì‹ì‚¬</div>
        <div id="places-food"></div>
      </div>

      <div class="category">
        <div class="category-title">â˜• ì¹´í˜ / ë² ì´ì»¤ë¦¬</div>
        <div id="places-cafe"></div>
      </div>

      <div class="legend">
        <div class="legend-item"><span class="legend-dot dot-play"></span> ì—¬ê°€/ë†€ì´</div>
        <div class="legend-item"><span class="legend-dot dot-food"></span> ì‹ì‚¬</div>
        <div class="legend-item"><span class="legend-dot dot-cafe"></span> ì¹´í˜</div>
      </div>
    </div>
  </div>

  <script>
    // ì¥ì†Œ ë°ì´í„° (API ê²€ìƒ‰ ê²°ê³¼ ê¸°ë°˜)
    const places = {
      play: [
        { name: "ë¡¯ë°ì›”ë“œ ì•„ì¿ ì•„ë¦¬ì›€", lat: 37.51345035, lng: 127.10479858, dist: "404m", desc: "í•´ì–‘ìƒë¬¼ ê´€ëŒ", url: "http://place.map.kakao.com/25974806" },
        { name: "ë¡¯ë°ì›”ë“œ ì–´ë“œë²¤ì²˜", lat: 37.51113060, lng: 127.09811980, dist: "305m", desc: "ì‹¤ë‚´+ì•¼ì™¸ ë†€ì´ê³µì›", url: "http://place.map.kakao.com/27560699" },
        { name: "ì±”í”¼ì–¸ë”ë¸”ë™ë²¨íŠ¸ ë¡¯ë°ì›”ë“œëª°", lat: 37.51423958, lng: 127.10485963, dist: "422m", desc: "ë†€ì´êµìœ¡", url: "http://place.map.kakao.com/30260730" },
        { name: "í”Œë ˆì´íƒ€ì„ ë¡¯ë°ë§ˆíŠ¸ ì ì‹¤ì›”ë“œì ", lat: 37.51167977, lng: 127.09646689, dist: "378m", desc: "í‚¤ì¦ˆì¹´í˜", url: "http://place.map.kakao.com/25706446" },
        { name: "ìº˜ë¦¬í´ëŸ½ í™ˆí”ŒëŸ¬ìŠ¤ì ì‹¤ì ", lat: 37.51625135, lng: 127.10300625, dist: "408m", desc: "í‚¤ì¦ˆì¹´í˜", url: "http://place.map.kakao.com/309186562" }
      ],
      food: [
        { name: "ì• ìŠë¦¬í€¸ì¦ˆ ì ì‹¤ë¡¯ë°ìºìŠ¬ì ", lat: 37.51455574, lng: 127.09976440, dist: "144m", desc: "ë·”í˜", url: "http://place.map.kakao.com/21302210" },
        { name: "ì•„ì›ƒë°±ìŠ¤í…Œì´í¬í•˜ìš°ìŠ¤ ë¡¯ë°ë°±í™”ì ì ì‹¤ì ", lat: 37.51175971, lng: 127.09786953, dist: "270m", desc: "ìŠ¤í…Œì´í¬", url: "http://place.map.kakao.com/1766053303" },
        { name: "ë§¤ë“œí¬ê°ˆë¦­ ë¡¯ë°ì‹œë„¤ë§ˆì›”ë“œíƒ€ì›Œì ", lat: 37.51398846, lng: 127.10456180, dist: "390m", desc: "ì´íƒˆë¦¬ì•ˆ", url: "http://place.map.kakao.com/25972163" },
        { name: "ìºë¡¤ìŠ¤", lat: 37.51320338, lng: 127.10388544, dist: "323m", desc: "íŒ¨ë°€ë¦¬ë ˆìŠ¤í† ë‘", url: "http://place.map.kakao.com/172624697" }
      ],
      cafe: [
        { name: "ëŸ°ë˜ë² ì´ê¸€ë®¤ì§€ì—„ ì ì‹¤ì ", lat: 37.51337207, lng: 127.10365833, dist: "303m", desc: "ë² ì´ì»¤ë¦¬ì¹´í˜", url: "http://place.map.kakao.com/1959865002" },
        { name: "ìŠ¤íƒ€ë²…ìŠ¤ ì ì‹¤ì—­ì ", lat: 37.51526713, lng: 127.09916811, dist: "236m", desc: "ì»¤í”¼", url: "http://place.map.kakao.com/11246062" },
        { name: "ë‰´ì§ˆëœë“œìŠ¤í† ë¦¬", lat: 37.50969133, lng: 127.10584859, dist: "638m", desc: "ì„ì´Œí˜¸ìˆ˜ ë·°", url: "http://place.map.kakao.com/21404892" },
        { name: "ë°€ë„ ë¡¯ë°ë°±í™”ì ì ì‹¤ì ", lat: 37.51216269, lng: 127.09974764, dist: "134m", desc: "ì‹ë¹µ ì „ë¬¸", url: "http://place.map.kakao.com/1087805899" }
      ]
    };

    // ì ì‹¤ì—­ ì¤‘ì‹¬ ì¢Œí‘œ
    const jamsil = [37.513311, 127.100231];

    // ì§€ë„ ì´ˆê¸°í™”
    const map = L.map('map').setView(jamsil, 16);

    // OpenStreetMap íƒ€ì¼ ì¶”ê°€
    L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
      maxZoom: 19,
      attribution: '&copy; <a href="https://openstreetmap.org/copyright">OpenStreetMap</a>'
    }).addTo(map);

    // ì ì‹¤ì—­ ë§ˆì»¤
    L.marker(jamsil, {
      icon: L.divIcon({
        className: 'custom-marker',
        html: '<div style="background:#333;width:24px;height:24px;border-radius:50%;display:flex;align-items:center;justify-content:center;color:white;font-size:10px;border:2px solid white;">ğŸš‡</div>',
        iconSize: [24, 24],
        iconAnchor: [12, 12]
      })
    }).addTo(map).bindPopup('<b>ì ì‹¤ì—­</b><br>ê²€ìƒ‰ ì¤‘ì‹¬ì ');

    // ë§ˆì»¤ ì €ì¥ìš©
    const markers = {};

    // ì»¤ìŠ¤í…€ ë§ˆì»¤ ì•„ì´ì½˜ ìƒì„±
    function createIcon(type, label) {
      const colors = { play: '#e74c3c', food: '#f39c12', cafe: '#27ae60' };
      return L.divIcon({
        className: 'custom-marker',
        html: `<div class="custom-marker" style="background:${colors[type]}">${label}</div>`,
        iconSize: [32, 32],
        iconAnchor: [16, 16],
        popupAnchor: [0, -16]
      });
    }

    // íŒì—… ì»¨í…ì¸  ìƒì„±
    function createPopup(place) {
      return `
        <div class="popup-title">${place.name}</div>
        <div class="popup-category">${place.desc} Â· ${place.dist}</div>
        <a href="${place.url}" target="_blank" class="popup-link">ì¹´ì¹´ì˜¤ë§µì—ì„œ ë³´ê¸°</a>
      `;
    }

    // ì‚¬ì´ë“œë°” ì•„ì´í…œ ìƒì„±
    function createPlaceItem(place, type, index, marker) {
      const div = document.createElement('div');
      div.className = 'place-item';
      div.innerHTML = `
        <div class="name">${place.name}</div>
        <div class="meta">${place.desc} Â· ${place.dist}</div>
        <a href="${place.url}" target="_blank" class="link" onclick="event.stopPropagation()">ì¹´ì¹´ì˜¤ë§µì—ì„œ ë³´ê¸° â†’</a>
      `;
      div.addEventListener('click', () => {
        // ëª¨ë“  ì•„ì´í…œ ë¹„í™œì„±í™”
        document.querySelectorAll('.place-item').forEach(el => el.classList.remove('active'));
        // í˜„ì¬ ì•„ì´í…œ í™œì„±í™”
        div.classList.add('active');
        // ì§€ë„ ì´ë™ ë° íŒì—… ì—´ê¸°
        map.setView([place.lat, place.lng], 17);
        marker.openPopup();
      });
      return div;
    }

    // ì¥ì†Œ ë Œë”ë§
    function renderPlaces(type, containerId) {
      const container = document.getElementById(containerId);
      places[type].forEach((place, index) => {
        // ë§ˆì»¤ ì¶”ê°€
        const marker = L.marker([place.lat, place.lng], {
          icon: createIcon(type, index + 1)
        }).addTo(map).bindPopup(createPopup(place));

        markers[`${type}-${index}`] = marker;

        // ì‚¬ì´ë“œë°” ì•„ì´í…œ ì¶”ê°€
        container.appendChild(createPlaceItem(place, type, index, marker));
      });
    }

    // ë Œë”ë§ ì‹¤í–‰
    renderPlaces('play', 'places-play');
    renderPlaces('food', 'places-food');
    renderPlaces('cafe', 'places-cafe');

    // ëª¨ë“  ë§ˆì»¤ê°€ ë³´ì´ë„ë¡ ì§€ë„ ë²”ìœ„ ì¡°ì •
    const allCoords = [
      ...places.play.map(p => [p.lat, p.lng]),
      ...places.food.map(p => [p.lat, p.lng]),
      ...places.cafe.map(p => [p.lat, p.lng])
    ];
    map.fitBounds(allCoords, { padding: [50, 50] });
  </script>
</body>
</html>
